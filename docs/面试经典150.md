# 数组

## T135 发糖果

**题目**

`n` 个孩子站成一排。给你一个整数数组 `ratings` 表示每个孩子的评分。

你需要按照以下要求，给这些孩子分发糖果：

- 每个孩子至少分配到 `1` 个糖果。
- 相邻两个孩子评分更高的孩子会获得更多的糖果。

请你给每个孩子分发糖果，计算并返回需要准备的 **最少糖果数目** 。

**题解**

```java
/**
     * [5, 0, 1, 3, 4]
     * 两次遍历，分别从左遍历，如果 i < i + 1, 设为 1，否则设置为 +1
     * [1, 1, 2, 3, 4]
     * 从右边遍历，判断满足右边的规则需要的糖果
     * [2, 1, 1, 1, 1]
     * 最终为这两个的最大值
     * [2, 1, 2, 3, 4]
     * @param ratings
     * @return
     */
public int candyI(int[] ratings) {
    int n = ratings.length;
    int[] leftRule = new int[n];
    int candy = 0;

    // 遍历满足左规则的时候，需要的最少糖果
    for (int i = 0; i < n; i++) {
        // 当前孩子大于左边孩子，就增加1，否则就只有一颗糖果
        if (i > 0 && ratings[i] - ratings[i - 1] > 0) leftRule[i] = leftRule[i -1] + 1;
        else leftRule[i] = 1;
    }

    int rightRule = 1;
    // 遍历右规则
    for (int i = n - 1; i >= 0; i--) {
        if (i < n - 1 && ratings[i] > ratings[i + 1]) rightRule += 1;
        else rightRule = 1;

        candy += Math.max(leftRule[i], rightRule);
    }

    return candy;
}
```



## T42 接雨水

**题目描述**

给定 `n` 个非负整数表示每个宽度为 `1` 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水.

![image-20240817115320232](https://shepi-1308499968.cos.ap-chengdu.myqcloud.com/img/image-20240817115320232.png)

输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]
输出：6
解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。

**题解**

```java 
// 左右双指针
public int trapI(int[] height) {
    int left = 0;
    int right = height.length-1;
    int leftMax = 0;
    int rightMax = 0;
    int water = 0;

    // 如果添加等于，则会造成一个柱子统计两次
    while (left < right) {
        leftMax = Math.max(leftMax, height[left]);
        rightMax = Math.max(rightMax, height[right]);

        // 当前高度小于左边的最大高度，说明右边可以堵住
        if (height[left] < rightMax) {
            water += leftMax - height[left]; // 左边坝高 - 当前高度
            left++;
        } else {
            // 左边可以堵住
            water += rightMax - height[right]; // 右边坝高 - 当前高度
            right--;
        }
    }
    return water;
}
```

